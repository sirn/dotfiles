---
- name: update homebrew
  homebrew: update_homebrew=yes
  notify:
    - upgrade homebrew packages

- name: initialize brew taps
  homebrew_tap: tap={{item}} state=present
  with_items: "{{brew_taps}}"

- name: install homebrew packages
  homebrew: name={{item}} state=present
  with_items: "{{brew_packages}}"

- name: link darwin-specific files and directories
  file:
    src: "{{item.source}}"
    path: "{{item.dest}}"
    state: link
    force: yes
  with_items: "{{dots_links_darwin}}"
  when: ansible_os_family == "Darwin"
