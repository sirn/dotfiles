#!/usr/bin/env zsh
#
# ~/.zshrc
#

# Do not use zsh if TERM is dumb. This is to make TRAMP work when
# connecting to a machine with the current Zsh profile.
if [ "$TERM" = "dumb" ]; then
    SHELL=sh
    exec sh -i
fi

# Otherwise we use zplug to manage everything.
source ~/.zplug/init.zsh

zplug "zplug/zplug", hook-build:'zplug --self-manage'

zplug "b4b4r07/enhancd", use:init.sh
zplug "zsh-users/zsh-completions", defer:2
zplug "Valodim/zsh-curl-completion", defer:2
zplug "zsh-users/zsh-autosuggestions", \
    defer:2, \
    if:"
        [[ $TERM == xterm* ]] ||
        [[ $TERM == rxvt* ]] ||
        [[ $TERM == screen* ]]
    " # end-quote

zplug "~/.dotfiles/zsh/config", from:local, defer:3

if [ -d ~/.dotpriv/zsh/config ]; then
    zplug "~/.dotpriv/zsh/config", from:local, defer:3
fi

zplug "agkozak/zhooks", defer:3
zplug "b4b4r07/zsh-gomi", defer:3
zplug "supercrabtree/k", defer:3
zplug "motemen/ghq", defer:3, as:command, from:github, hook-build:'go get -d && go build'
zplug "knqyf263/pet", defer:3, as:command, from:github, hook-build:'go get -d && go build'
zplug "junegunn/fzf", defer:3, as:command, from:github, hook-build:'go get -d && go build'

if ! zplug check; then
    printf "Install? [y/N]: "
    if read -q; then
        echo; zplug install
    fi
fi

bindkey -e
zplug load

# vim:ft=sh
